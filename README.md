# 支付宝账单分析系统

一个基于 Flask 和 ECharts 的支付宝账单可视化分析系统，帮助用户深入了解个人消费情况。

## 功能特点

### 1. 年度分析
- 年度支出趋势图表
- 环比变化分析
- 分类占比分布
- 大额交易统计

### 2. 月度分析
- 月度支出趋势图表
- 环比变化分析
- 3个月移动平均线
- 交易笔数统计

### 3. 分类分析
- 分类支出趋势图
- 分类占比饼图
- 分类详细交易记录
- 分类趋势分析

### 4. 时间分析
- 日支出金额热力图
- 日收入金额热力图
- 日交易次数热力图
- 日内时段分布
- 工作日/周末对比

### 5. 交易记录
- 交易明细查看
- 多维度筛选
- 分页显示
- 状态标记

## 技术栈

### 后端
- Flask: Web 框架
- Pandas: 数据处理
- Python: 编程语言

### 前端
- ECharts: 数据可视化
- HTML/CSS: 页面布局（Apple 风格设计）
- JavaScript: 交互逻辑

## 安装使用

1. 克隆项目
~~~bash
git clone https://github.com/hessel2333/alipay_record_analysis.git
cd alipay_record_analysis
~~~

2. 创建虚拟环境
~~~bash
python -m venv myenv
source myenv/bin/activate  # Linux/Mac
myenv\Scripts\activate     # Windows
~~~

3. 安装依赖
~~~bash
pip install -r requirements.txt
~~~

4. 运行项目
~~~bash
python app.py
~~~

5. 访问 http://localhost:5000

## 项目结构
~~~
alipay-record-analysis/
├── app.py                 # Flask 应用主文件
├── requirements.txt       # 项目依赖
├── templates/            # 模板文件目录
│   ├── base.html        # 基础模板
│   ├── index.html       # 首页
│   ├── yearly.html      # 年度分析
│   ├── monthly.html     # 月度分析
│   ├── category.html    # 分类分析
│   ├── time.html        # 时间分析
│   ├── transactions.html # 交易记录
│   └── settings.html    # 设置页面
└── README.md            # 项目说明文档
~~~

## 数据要求

支持支付宝账单 CSV 文件，包含以下字段：
- 交易时间
- 交易分类
- 收/支
- 金额
- 商品说明
- 交易状态
- 交易对方

## 隐私说明

- 所有数据分析均在本地进行
- 不会收集或存储任何用户数据
- 支持本地部署，保护隐私安全

## License

MIT License

## 开发计划

- [ ] 支持多年度数据分析
- [ ] 添加数据导出功能
- [ ] 支持自定义分类
- [ ] 添加预算管理功能
- [ ] 支持多账单合并分析

## 注意事项

- 支持 GBK 编码的支付宝账单文件
- 自动处理退款和交易关闭状态
- 支持响应式布局
- 数据缓存优化

## 更新日志

### v1.0.0
- 初始版本发布
- 基础功能实现
- 响应式布局支持

## 页面说明

### 总览页面
- 展示关键统计数据
  - 本月支出
  - 月均支出
  - 总支出
  - 收支差额
- 月度支出趋势
  - 支出金额柱状图
  - 环比变化曲线
  - 3月移动平均线
- 分类支出占比饼图

### 月度分析页面
- 月度统计指标
  - 月度总支出
  - 日均支出
  - 笔均支出
  - 3月均线
- 月度支出趋势图
- 分类支出堆叠图
- 单月分类明细

### 分类分析页面
- 分类支出占比饼图
- 分类支出排名条形图
- 分类趋势分析
  - 支出金额
  - 环比变化
  - 占比变化
- 分类详细统计

### 时间分析页面
- 日历热力图
  - 支出金额
  - 收入金额
  - 交易次数
- 日内时段分布
- 工作日/周末对比

### 交易记录页面
- TOP 10 大额交易
- 交易明细表格
  - 分页显示
  - 多维度筛选
  - 状态标记
  - 金额区分

## 数据处理

### 数据预处理
- 自动识别表头位置
- GBK 编码支持
- 日期时间格式化
- 退款状态处理

### 数据缓存
- LRU 缓存装饰器
- 避免重复加载
- 提升响应速度

### 数据验证
- 必需字段检查
- 数据类型验证
- 错误信息提示

## 部署说明

### 开发环境
- Python 3.x
- Flask
- Pandas
- ECharts 5.x

### 生产环境建议
- 使用 Gunicorn/uWSGI
- Nginx 反向代理
- 数据文件权限设置
- 定时任务更新

## 更新日志

### v1.0.0
- 初始版本发布
- 基础功能实现
- 响应式布局支持

## 安装使用

1. 克隆项目

# 支付宝账单分析工具

一个基于 Flask 的支付宝账单分析工具，提供可视化的消费分析报告。

## 功能特点

- 支持多个支付宝账单CSV文件的导入和合并分析
- 提供年度、月度、分类、时间等多维度的消费分析
- 数据分析全部在本地进行，保护用户隐私
- 支持大额/小额交易分析
- 支持交易记录搜索和筛选
- 数据可视化展示，包括趋势图、热力图等

## 安装使用

1. 克隆项目 