# 支付宝账单分析系统

一个基于 Flask 和 ECharts 的支付宝账单可视化分析系统，帮助用户深入了解个人消费情况。

## 功能特点

### 1. 月度分析
- 月度支出趋势图表
- 环比变化分析
- 3个月移动平均线
- 交易笔数统计

### 2. 分类分析
- 月度分类支出堆叠图
- 分类占比饼图
- 分类详细交易记录
- 分类趋势分析

### 3. 热力图分析
- 日支出金额热力图
- 日收入金额热力图
- 日交易次数热力图
- 分位数显示

### 4. 大额交易分析
- TOP 10/20 大额交易展示
- 交易详情查看
- 退款状态标记

### 5. 时间分布分析
- 日内消费时段分布
- 工作日/周末消费对比
- 分类时间分布分析

### 6. 数据筛选
- 全部交易分析
- 大额交易分析（>1000元）
- 小额交易分析（≤1000元）

## 技术栈

### 后端
- Flask: Web 框架
- Pandas: 数据处理
- Python: 编程语言

### 前端
- ECharts: 数据可视化
- HTML/CSS: 页面布局
- JavaScript: 交互逻辑

## 数据要求

系统需要支付宝账单 CSV 文件，要求包含以下字段：
- 交易时间
- 交易分类
- 收/支
- 金额
- 商品说明
- 交易状态
- 交易对方

## 使用方法

1. 确保系统中已安装 Python 3.x
2. 安装依赖包：
~~~bash
pip install flask pandas
~~~

3. 将支付宝账单 CSV 文件重命名为 `alipay_record_2024.csv` 并放置在项目根目录
4. 运行应用：
~~~bash
python app.py
~~~

5. 在浏览器中访问 `http://localhost:5000`

## 注意事项

- 支持 GBK 编码的支付宝账单文件
- 自动处理退款和交易关闭状态
- 支持响应式布局
- 数据缓存优化

## 开发计划

- [ ] 支持多年度数据分析
- [ ] 添加数据导出功能
- [ ] 支持自定义分类
- [ ] 添加预算管理功能
- [ ] 支持多账单合并分析

## 许可证

MIT License

## 项目结构

~~~
alipay-analysis/
├── app.py                 # Flask 应用主文件
├── alipay_record_2024.csv # 支付宝账单数据文件
├── templates/             # 模板文件目录
│   ├── base.html         # 基础模板
│   ├── overview.html     # 总览页面
│   ├── monthly.html      # 月度分析页面
│   ├── category.html     # 分类分析页面
│   ├── time.html         # 时间分析页面
│   └── transactions.html # 交易记录页面
└── README.md             # 项目说明文档
~~~

## 页面说明

### 总览页面
- 展示关键统计数据
  - 本月支出
  - 月均支出
  - 总支出
  - 收支差额
- 月度支出趋势
  - 支出金额柱状图
  - 环比变化曲线
  - 3月移动平均线
- 分类支出占比饼图

### 月度分析页面
- 月度统计指标
  - 月度总支出
  - 日均支出
  - 笔均支出
  - 3月均线
- 月度支出趋势图
- 分类支出堆叠图
- 单月分类明细

### 分类分析页面
- 分类支出占比饼图
- 分类支出排名条形图
- 分类趋势分析
  - 支出金额
  - 环比变化
  - 占比变化
- 分类详细统计

### 时间分析页面
- 日历热力图
  - 支出金额
  - 收入金额
  - 交易次数
- 日内时段分布
- 工作日/周末对比

### 交易记录页面
- TOP 10 大额交易
- 交易明细表格
  - 分页显示
  - 多维度筛选
  - 状态标记
  - 金额区分

## 数据处理

### 数据预处理
- 自动识别表头位置
- GBK 编码支持
- 日期时间格式化
- 退款状态处理

### 数据缓存
- LRU 缓存装饰器
- 避免重复加载
- 提升响应速度

### 数据验证
- 必需字段检查
- 数据类型验证
- 错误信息提示

## 部署说明

### 开发环境
- Python 3.x
- Flask
- Pandas
- ECharts 5.x

### 生产环境建议
- 使用 Gunicorn/uWSGI
- Nginx 反向代理
- 数据文件权限设置
- 定时任务更新

## 更新日志

### v1.0.0
- 初始版本发布
- 基础功能实现
- 响应式布局支持

## 安装使用

1. 克隆项目

# 支付宝账单分析工具

一个基于 Flask 的支付宝账单分析工具，提供可视化的消费分析报告。

## 功能特点

- 支持多个支付宝账单CSV文件的导入和合并分析
- 提供年度、月度、分类、时间等多维度的消费分析
- 数据分析全部在本地进行，保护用户隐私
- 支持大额/小额交易分析
- 支持交易记录搜索和筛选
- 数据可视化展示，包括趋势图、热力图等

## 安装使用

1. 克隆项目 